# MM58167B Microprocessor Real Time Clock

## Functional Description

### Real Time Counter

The real time counter is divided into 4-bit digits with 2 digits being accessed during any read or write cycle.
Each digit represents a BCD number and is defined in Table I.
Any unused bits are held at a logical zero during a read and ignored during a write.
An unused bit is any bit not necessary to provide a full BCD number.
For example tens of hours cannot legally exceed the number 2 thus only 2 bits are necessary to define the tens of hours.
The other 2 bits in the tens of hours digit are unused.
The unused bits are designated in Table I as dashes.

The addressable portion of the counter is from milliseconds to months.
The counter itself is a ripple counter.
The ripple delay is less than 60 ms above 45V and 300 ms at 22V.

### RAM

56 bits of RAM are contained on-chip.
These can be used for any necessary power down storage or as an alarm latch for comparison to the real time counter.
The data in the RAM can be compared to the real time counter on a digit basis.
The only digits that are not compared are the unit ten thousandths of seconds and tens of days of the week
(these are unused in the real time counter).
If the two most significant bits of any RAM digit are ones, then this RAM location will always compare.
The rule of thumb for an "alarm" interrupt is:
All nibbles of higher order than specified are set to C hex (always compare).
All nibbles lower than specified are set to "zero".
As an example, if an alarm is to occur everyday at 10:15 a.m., configure the bits in RAM as shown in Table II.

The RAM is formatted the same as the real time counter, 4 bits per digit, 14 digits, however there are no unused bits.
The unused bits in the real time counter will compare only to zeros in the RAM.

An address map is shown in Table III.

### TABLE I. Real Time Counter Format
                                             Max              Max
                                ---Units---  BCD  ---Tens---- BCD
Counter Addressed               D0 D1 D2 D3  Code D4 D5 D6 D7 Code
------------------------------------------------------------------
Milliseconds              (00H) -- -- -- --   0   D4 D5 D6 D7  9
Hundredths and Tenths Sec (01H) D0 D1 D2 D3   9   D4 D5 D6 D7  9
Seconds                   (02H) D0 D1 D2 D3   9   D4 D5 D6 --  5
Minutes                   (03H) D0 D1 D2 D3   9   D4 D5 D6 --  5
Hours                     (04H) D0 D1 D2 D3   9   D4 D5 -- --  2
Day of the Week           (05H) D0 D1 D2 --   7   -- -- -- --  0
Day of the Month          (06H) D0 D1 D2 D3   9   D4 D5 -- --  3
Month                     (07H) D0 D1 D2 D3   9   D4 -- -- --  1


### TABLE II. Clock RAM Bit Map for Alarm Interrupt Everyday at 10:15 a.m.

                                --------Data---------
                    -Address-   Hi Nibble   Lo Nibble
Function            4 3 2 1 0   7 6 5 4     3 2 1 0
-----------------------------------------------------------
Milliseconds        0 1 0 0 0   0 0 0 0     No RAM Exists
Hundredths and
Tenths of Seconds   0 1 0 0 1   0 0 0 0     0 0 0 0
Seconds             0 1 0 1 0   0 0 0 0     0 0 0 0
Minutes             0 1 0 1 1   0 0 0 1     0 1 0 1
Hours               0 1 1 0 0   0 0 0 1     0 0 0 0
Day of Week         0 1 1 0 1 No RAM Exists 1 1 X X
Day of Month        0 1 1 1 0   1 1 X X     1 1 X X
Months              0 1 1 1 1   1 1 X X     1 1 X X

### TABLE III. Address Codes and Function

A4 A3 A2 A1 A0  Function
------------------------------
 0  0  0  0  0  Counter - Milliseconds
 0  0  0  0  1  Counter - Hundredths and Tenths of Seconds
 0  0  0  1  0  Counter - Seconds
 0  0  0  1  1  Counter - Minutes
 0  0  1  0  0  Counter - Hours
 0  0  1  0  1  Counter - Day of Week
 0  0  1  1  0  Counter - Day of Month
 0  0  1  1  1  Counter - Month
 0  1  0  0  0  RAM - Milliseconds
 0  1  0  0  1  RAM - Hundredths and Tenths of Seconds
 0  1  0  1  0  RAM - Seconds
 0  1  0  1  1  RAM - Minutes
 0  1  1  0  0  RAM - Hours
 0  1  1  0  1  RAM - Day of Week
 0  1  1  1  0  RAM - Day of Month
 0  1  1  1  1  RAM - Months
 1  0  0  0  0  Interrupt Status Register
 1  0  0  0  1  Interrupt Control Register
 1  0  0  1  0  Counters Reset
 1  0  0  1  1  RAM Reset
 1  0  1  0  0  Status Bit
 1  0  1  0  1  GO Comand
 1  0  1  1  0  /Standby Interrupt
 1  1  1  1  1  Test Mode
